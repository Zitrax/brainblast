<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Kyra: KrSprite Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li id="current"><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<h1>KrSprite Class Reference</h1><!-- doxytag: class="KrSprite" --><!-- doxytag: inherits="KrImage" -->The most obvious class for a sprite image, describes on on screen image, potentially with multiple actions and frames.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="sprite_8h-source.html">sprite.h</a>&gt;</code>
<p>
<p>Inheritance diagram for KrSprite:
<p><center><img src="classKrSprite.png" usemap="#KrSprite_map" border="0" alt=""></center>
<map name="KrSprite_map">
<area href="classKrImage.html" alt="KrImage" shape="rect" coords="0,56,67,80">
<area href="classKrImNode.html" alt="KrImNode" shape="rect" coords="0,0,67,24">
</map>
<a href="classKrSprite-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="60bec52b98cd097801277a9eebf28117"></a><!-- doxytag: member="KrSprite::SetFrame" ref="60bec52b98cd097801277a9eebf28117" args="(int i)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKrSprite.html#60bec52b98cd097801277a9eebf28117">SetFrame</a> (int i)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the current frame for the current action. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="d31cb77b479d4799fc7b3c206f256caf"></a><!-- doxytag: member="KrSprite::SetAction" ref="d31cb77b479d4799fc7b3c206f256caf" args="(const std::string &amp;actionName)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKrSprite.html#d31cb77b479d4799fc7b3c206f256caf">SetAction</a> (const std::string &amp;actionName)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the current action by its name. "STANDING". <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKrSprite.html#70db6108dac371acd4bf8283e042cbd5">SetActionRotated</a> (const std::string &amp;actionName, int rotation)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">[Experimental, added 1.6] Rotations applied by the encoder change the action name to reflect the rotation.  <a href="#70db6108dac371acd4bf8283e042cbd5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="d418e90b76211dfbef48b4730950e936"></a><!-- doxytag: member="KrSprite::SetAction" ref="d418e90b76211dfbef48b4730950e936" args="(U32 id)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKrSprite.html#d418e90b76211dfbef48b4730950e936">SetAction</a> (U32 id)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Note this is the action Id (written by the encoder: STANDING), NOT the index (whatever that happens to be. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="8267c5573733a15cb1bd536580062a11"></a><!-- doxytag: member="KrSprite::GetAction" ref="8267c5573733a15cb1bd536580062a11" args="()" -->
<a class="el" href="classKrAction.html">KrAction</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKrSprite.html#8267c5573733a15cb1bd536580062a11">GetAction</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get a pointer to the current action. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="8d5f25d875b937efd8b60fc687819a2a"></a><!-- doxytag: member="KrSprite::ActionName" ref="8d5f25d875b937efd8b60fc687819a2a" args="() const " -->
std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKrSprite.html#8d5f25d875b937efd8b60fc687819a2a">ActionName</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the name of the current action. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="c9544221d1c58131e1b7a54501bb529d"></a><!-- doxytag: member="KrSprite::NumFrames" ref="c9544221d1c58131e1b7a54501bb529d" args="() const " -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKrSprite.html#c9544221d1c58131e1b7a54501bb529d">NumFrames</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the number of frames in the current action. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="1cfb9999685b9d3a5dd076f834d2c070"></a><!-- doxytag: member="KrSprite::Frame" ref="1cfb9999685b9d3a5dd076f834d2c070" args="() const " -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKrSprite.html#1cfb9999685b9d3a5dd076f834d2c070">Frame</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the current frame of the current action. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="94427e2c57904a43319870fcf524accf"></a><!-- doxytag: member="KrSprite::GetFrame" ref="94427e2c57904a43319870fcf524accf" args="() const " -->
KrRle *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKrSprite.html#94427e2c57904a43319870fcf524accf">GetFrame</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get a pointer to the current frame. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKrSprite.html#f4533ae6005f2644e26d2db12378d791">DoStep</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Take one step: advance the frame and move the position of the sprite.  <a href="#f4533ae6005f2644e26d2db12378d791"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ff8b4d42d78028a5b4ae03166f835aa1"></a><!-- doxytag: member="KrSprite::StepSize" ref="ff8b4d42d78028a5b4ae03166f835aa1" args="() const " -->
grinliz::Vector2I&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKrSprite.html#ff8b4d42d78028a5b4ae03166f835aa1">StepSize</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the current step (x and y delta to the next frame). <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ff11746e5153ca3313831b92a0349c2d"></a><!-- doxytag: member="KrSprite::Stride" ref="ff11746e5153ca3313831b92a0349c2d" args="()" -->
grinliz::Vector2I&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKrSprite.html#ff11746e5153ca3313831b92a0349c2d">Stride</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the sum of distance covered by all the DoSteps. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKrSprite.html#1209c24bfd7de66b535bf4fcda81131e">QueryBoundingBox</a> (grinliz::Rectangle2I *boundingBox, int window=0)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the bounding box of the image, in its current state.  <a href="#1209c24bfd7de66b535bf4fcda81131e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="0bdf4464213615b984efe8d22b8dbe30"></a><!-- doxytag: member="KrSprite::SpriteResource" ref="0bdf4464213615b984efe8d22b8dbe30" args="()" -->
<a class="el" href="classKrSpriteResource.html">KrSpriteResource</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKrSprite.html#0bdf4464213615b984efe8d22b8dbe30">SpriteResource</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the resource for this Sprite. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="7134d8aa123e7799a65138176bf85f66"></a><!-- doxytag: member="KrSprite::HitTest" ref="7134d8aa123e7799a65138176bf85f66" args="(int x, int y, int flags, std::vector&lt; KrImage * &gt; *results, int window)" -->
virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKrSprite.html#7134d8aa123e7799a65138176bf85f66">HitTest</a> (int x, int y, int flags, std::vector&lt; <a class="el" href="classKrImage.html">KrImage</a> * &gt; *results, int window)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Hit test this object. Returns true if there was a hit, and 'this' will be added to results. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="classKrImNode.html">KrImNode</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKrSprite.html#6b7481fda7fe4c0146d19e8a81bb91c0">Clone</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return a copy if this object, not in a Tree().  <a href="#6b7481fda7fe4c0146d19e8a81bb91c0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="b0c59bca76ad906d437c7a6b2ff224d4"></a><!-- doxytag: member="KrSprite::ToSprite" ref="b0c59bca76ad906d437c7a6b2ff224d4" args="()" -->
virtual <a class="el" href="classKrSprite.html">KrSprite</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKrSprite.html#b0c59bca76ad906d437c7a6b2ff224d4">ToSprite</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return a pointer if this is a sprite. <br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
The most obvious class for a sprite image, describes on on screen image, potentially with multiple actions and frames. 
<p>
Almost all pre-generated images are sprites. The only reason to use a tile is for rotation.<p>
A Sprite contains an arbitrary number of actions, each of which has any number of frames.<p>
<div class="fragment"><pre class="fragment">	An example:
		Sprite:	"DRONE", an alien creature
			Action: "WALK.DIR7", walking NW
				Frames: 0, 1, 2, 3, 4, 5
			Action: "WALK.DIR9", walking NE
				Frames: 0, 1, 2, 3, 4, 5
			Action: "STANDING", no motion
				Frames: 0

	</pre></div> 
<p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="6b7481fda7fe4c0146d19e8a81bb91c0"></a><!-- doxytag: member="KrSprite::Clone" ref="6b7481fda7fe4c0146d19e8a81bb91c0" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classKrImNode.html">KrImNode</a>* KrSprite::Clone           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return a copy if this object, not in a Tree(). 
<p>
It is return untransformed. In the case of a sprite, the action and frame will be set to the current value. 
<p>
Reimplemented from <a class="el" href="classKrImNode.html#803ca79b225c62b3dfa4d8de3f77986e">KrImNode</a>.
</div>
</div><p>
<a class="anchor" name="f4533ae6005f2644e26d2db12378d791"></a><!-- doxytag: member="KrSprite::DoStep" ref="f4533ae6005f2644e26d2db12378d791" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KrSprite::DoStep           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Take one step: advance the frame and move the position of the sprite. 
<p>
Not all sprites have steps. They are configured in the Sprite editor. 
</div>
</div><p>
<a class="anchor" name="1209c24bfd7de66b535bf4fcda81131e"></a><!-- doxytag: member="KrSprite::QueryBoundingBox" ref="1209c24bfd7de66b535bf4fcda81131e" args="(grinliz::Rectangle2I *boundingBox, int window=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void KrSprite::QueryBoundingBox           </td>
          <td>(</td>
          <td class="paramtype">grinliz::Rectangle2I *&nbsp;</td>
          <td class="paramname"> <em>boundingBox</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>window</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the bounding box of the image, in its current state. 
<p>
If this is a sprite, it will be the bounding box of the current frame and action. The bounds are relative to the hotspot, so xmin and ymin will often be not zero.<p>
The current transformation matrix will be applied, so the result may be transformed bounds. 
<p>
Implements <a class="el" href="classKrImage.html#39d3eddcd81482dcc6bcbf45ca8296d8">KrImage</a>.
</div>
</div><p>
<a class="anchor" name="70db6108dac371acd4bf8283e042cbd5"></a><!-- doxytag: member="KrSprite::SetActionRotated" ref="70db6108dac371acd4bf8283e042cbd5" args="(const std::string &amp;actionName, int rotation)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KrSprite::SetActionRotated           </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>actionName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rotation</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
[Experimental, added 1.6] Rotations applied by the encoder change the action name to reflect the rotation. 
<p>
ROT000, where 000 is the rotation, in integer degrees. It as appended as the last segment of the name. For instance,<p>
"STANDING.ROT090" and STANDING | ROT090<p>
would be the string and integer representations. This method, giving the leading string ("STANDING") will add the rotation automatically. 
</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="sprite_8h-source.html">sprite.h</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Thu Jul 20 20:45:33 2006 for Kyra by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
