<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Kyra: color.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir_64442a03114772635a5c8e60a265274d.html">engine</a></div>
<h1>color.h</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*--License:</span>
<a name="l00002"></a>00002 <span class="comment">        Kyra Sprite Engine</span>
<a name="l00003"></a>00003 <span class="comment">        Copyright Lee Thomason (Grinning Lizard Software) 2001-2005</span>
<a name="l00004"></a>00004 <span class="comment">        www.grinninglizard.com/kyra</span>
<a name="l00005"></a>00005 <span class="comment">        www.sourceforge.net/projects/kyra</span>
<a name="l00006"></a>00006 <span class="comment"></span>
<a name="l00007"></a>00007 <span class="comment">        Kyra is provided under the LGPL. </span>
<a name="l00008"></a>00008 <span class="comment">        </span>
<a name="l00009"></a>00009 <span class="comment">        I kindly request you display a splash screen (provided in the HTML documentation)</span>
<a name="l00010"></a>00010 <span class="comment">        to promote Kyra and acknowledge the software and everyone who has contributed to it, </span>
<a name="l00011"></a>00011 <span class="comment">        but it is not required by the license.</span>
<a name="l00012"></a>00012 <span class="comment"></span>
<a name="l00013"></a>00013 <span class="comment">--- LGPL License --</span>
<a name="l00014"></a>00014 <span class="comment"></span>
<a name="l00015"></a>00015 <span class="comment">    This library is free software; you can redistribute it and/or</span>
<a name="l00016"></a>00016 <span class="comment">    modify it under the terms of the GNU Lesser General Public</span>
<a name="l00017"></a>00017 <span class="comment">    License as published by the Free Software Foundation; either</span>
<a name="l00018"></a>00018 <span class="comment">    version 2.1 of the License, or (at your option) any later version.</span>
<a name="l00019"></a>00019 <span class="comment"></span>
<a name="l00020"></a>00020 <span class="comment">    This library is distributed in the hope that it will be useful,</span>
<a name="l00021"></a>00021 <span class="comment">    but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00022"></a>00022 <span class="comment">    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<a name="l00023"></a>00023 <span class="comment">    Lesser General Public License for more details.</span>
<a name="l00024"></a>00024 <span class="comment"></span>
<a name="l00025"></a>00025 <span class="comment">    You should have received a copy of the GNU Lesser General Public</span>
<a name="l00026"></a>00026 <span class="comment">    License along with this library; if not, write to the Free Software</span>
<a name="l00027"></a>00027 <span class="comment">    Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span>
<a name="l00028"></a>00028 <span class="comment"></span>
<a name="l00029"></a>00029 <span class="comment">        The full text of the license can be found in lgpl.txt</span>
<a name="l00030"></a>00030 <span class="comment">*/</span>
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 <span class="preprocessor">#ifndef COLOR_INCLUDED</span>
<a name="l00034"></a>00034 <span class="preprocessor"></span><span class="preprocessor">#define COLOR_INCLUDED</span>
<a name="l00035"></a>00035 <span class="preprocessor"></span>
<a name="l00036"></a>00036 <span class="preprocessor">#include "SDL.h"</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include "../../grinliz/gltypes.h"</span>
<a name="l00038"></a>00038 
<a name="l00039"></a>00039 <span class="comment">// This is a guess, on what the byte ordering for 32 bit should be:</span>
<a name="l00040"></a>00040 <span class="preprocessor">#if !defined( SDL_BYTEORDER )</span>
<a name="l00041"></a>00041 <span class="preprocessor"></span><span class="preprocessor">        #error Need byte order!</span>
<a name="l00042"></a>00042 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00043"></a>00043 <span class="preprocessor"></span>
<a name="l00044"></a>00044 <span class="preprocessor">#if SDL_BYTEORDER == SDL_LIL_ENDIAN</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span><span class="preprocessor">        #define KYRA_FLIP_COLORS</span>
<a name="l00046"></a>00046 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00047"></a>00047 <span class="preprocessor"></span>
<a name="l00078"></a><a class="code" href="unionKrRGBA.html">00078</a> <span class="keyword">union </span><a class="code" href="unionKrRGBA.html">KrRGBA</a>
<a name="l00079"></a>00079 {
<a name="l00080"></a>00080         <span class="keyword">enum</span>  
<a name="l00081"></a>00081         {
<a name="l00082"></a>00082                 KR_TRANSPARENT = 0,
<a name="l00083"></a>00083                 KR_OPAQUE      = 255,
<a name="l00084"></a>00084         };
<a name="l00085"></a>00085 
<a name="l00086"></a>00086         
<a name="l00087"></a>00087         <span class="keyword">enum</span> {  
<a name="l00088"></a>00088                         
<a name="l00089"></a>00089 <span class="comment">// It will work regardless of the endian, or whether the colors</span>
<a name="l00090"></a>00090 <span class="comment">// are aligned. But it is much faster if the colors are aligned.</span>
<a name="l00091"></a>00091 <span class="preprocessor">#ifndef KYRA_FLIP_COLORS</span>
<a name="l00092"></a>00092 <span class="preprocessor"></span>                RED,
<a name="l00093"></a>00093                 GREEN,
<a name="l00094"></a>00094                 BLUE,
<a name="l00095"></a>00095 <span class="preprocessor">#else</span>
<a name="l00096"></a>00096 <span class="preprocessor"></span>                BLUE,
<a name="l00097"></a>00097                 GREEN,
<a name="l00098"></a>00098                 RED,
<a name="l00099"></a>00099 <span class="preprocessor">#endif</span>
<a name="l00100"></a>00100 <span class="preprocessor"></span>                ALPHA,
<a name="l00101"></a>00101 
<a name="l00102"></a>00102                 START = 0,
<a name="l00103"></a>00103                 END = 3                 <span class="comment">// r, g, b...alpha not in this.</span>
<a name="l00104"></a>00104         };
<a name="l00105"></a>00105 
<a name="l00106"></a>00106         <span class="keyword">struct </span>
<a name="l00107"></a>00107 <span class="keyword">        </span>{
<a name="l00108"></a>00108 <span class="preprocessor">#ifndef KYRA_FLIP_COLORS</span>
<a name="l00109"></a>00109 <span class="preprocessor"></span>                U8 red;                 
<a name="l00110"></a>00110                 U8 green;               
<a name="l00111"></a>00111                 U8 blue;                
<a name="l00112"></a>00112 <span class="preprocessor">#else</span>
<a name="l00113"></a>00113 <span class="preprocessor"></span>                U8 blue;
<a name="l00114"></a>00114                 U8 green;
<a name="l00115"></a>00115                 U8 red;
<a name="l00116"></a>00116 <span class="preprocessor">#endif</span>
<a name="l00117"></a><a class="code" href="unionKrRGBA.html#a79e3567536d13a0b85492d4ff5bfb01">00117</a> <span class="preprocessor"></span>                U8 <a class="code" href="unionKrRGBA.html#a79e3567536d13a0b85492d4ff5bfb01">alpha</a>;               
<a name="l00118"></a>00118         } c;
<a name="l00119"></a>00119 
<a name="l00120"></a>00120         U8              array[4];
<a name="l00121"></a>00121         U32             all;
<a name="l00122"></a>00122 
<a name="l00124"></a><a class="code" href="unionKrRGBA.html#e732622ffb57e420c361661d8efd22ae">00124</a>         <span class="keywordtype">float</span> <a class="code" href="unionKrRGBA.html#e732622ffb57e420c361661d8efd22ae">Redf</a>()<span class="keyword">    const </span>{ <span class="keywordflow">return</span> float( c.red )   / 255.0f; }
<a name="l00125"></a>00125         <span class="keywordtype">float</span> Greenf()<span class="keyword">  const </span>{ <span class="keywordflow">return</span> float( c.green ) / 255.0f; }
<a name="l00126"></a>00126         <span class="keywordtype">float</span> Bluef()<span class="keyword">   const </span>{ <span class="keywordflow">return</span> float( c.blue )  / 255.0f; }
<a name="l00127"></a>00127         <span class="keywordtype">float</span> Alphaf()<span class="keyword">  const </span>{ <span class="keywordflow">return</span> float( c.alpha ) / 255.0f; }
<a name="l00128"></a>00128 
<a name="l00130"></a><a class="code" href="unionKrRGBA.html#792a052c5211b415cb7497da2a92f0cf">00130</a>         <span class="keywordtype">void</span> <a class="code" href="unionKrRGBA.html#792a052c5211b415cb7497da2a92f0cf">Set</a>( U8 _red, U8 _green, U8 _blue, U8 _alpha = 255 )       
<a name="l00131"></a>00131                         {       c.red = _red; 
<a name="l00132"></a>00132                                 c.green = _green; 
<a name="l00133"></a>00133                                 c.blue = _blue; 
<a name="l00134"></a>00134                                 c.alpha = _alpha; 
<a name="l00135"></a>00135                         }
<a name="l00136"></a>00136 
<a name="l00137"></a>00137         <span class="keywordtype">bool</span> operator==( <a class="code" href="unionKrRGBA.html">KrRGBA</a> rhs )   { <span class="keywordflow">return</span> ( all == rhs.<a class="code" href="unionKrRGBA.html#818314efe095f69d93e56984f26819e1">all</a> ); }
<a name="l00138"></a>00138         <span class="keywordtype">bool</span> operator!=( <a class="code" href="unionKrRGBA.html">KrRGBA</a> rhs )   { <span class="keywordflow">return</span> ( all != rhs.<a class="code" href="unionKrRGBA.html#818314efe095f69d93e56984f26819e1">all</a> ); }
<a name="l00139"></a>00139 
<a name="l00143"></a>00143         <span class="keywordtype">void</span> <a class="code" href="unionKrRGBA.html#565bad278fe04f2853581c1a337d9d28">FromString</a>( <span class="keyword">const</span> <span class="keywordtype">char</span>* str );
<a name="l00144"></a>00144 };
<a name="l00145"></a>00145 
<a name="l00146"></a>00146 
<a name="l00147"></a>00147 
<a name="l00169"></a><a class="code" href="classKrColorTransform.html">00169</a> <span class="keyword">class </span><a class="code" href="classKrColorTransform.html">KrColorTransform</a>
<a name="l00170"></a>00170 {
<a name="l00171"></a>00171   <span class="keyword">public</span>:
<a name="l00172"></a>00172         <a class="code" href="classKrColorTransform.html">KrColorTransform</a>()      :       identity( <span class="keyword">true</span> ),
<a name="l00173"></a>00173                                                         hasAlpha( <span class="keyword">false</span> ),
<a name="l00174"></a>00174                                                         hasColor( <span class="keyword">false</span> )
<a name="l00175"></a>00175                                                 {
<a name="l00176"></a>00176                                                         m.<a class="code" href="unionKrRGBA.html#792a052c5211b415cb7497da2a92f0cf">Set</a>( 255, 255, 255, 0 );
<a name="l00177"></a>00177                                                         b.<a class="code" href="unionKrRGBA.html#792a052c5211b415cb7497da2a92f0cf">Set</a>( 0, 0, 0, 255 );
<a name="l00178"></a>00178                                                 }
<a name="l00179"></a>00179         <span class="comment">// --------- Friendly API ---------- //</span>
<a name="l00181"></a><a class="code" href="classKrColorTransform.html#bf00855f81b98d60126d8fd96db937e6">00181</a> <span class="comment"></span>        <span class="keywordtype">void</span> <a class="code" href="classKrColorTransform.html#bf00855f81b98d60126d8fd96db937e6">SetIdentity</a>()                                      { m.<a class="code" href="unionKrRGBA.html#792a052c5211b415cb7497da2a92f0cf">Set</a>( 255, 255, 255, 0 );
<a name="l00182"></a>00182                                                                                   b.<a class="code" href="unionKrRGBA.html#792a052c5211b415cb7497da2a92f0cf">Set</a>( 0, 0, 0, 255 );
<a name="l00183"></a>00183                                                                                 }
<a name="l00184"></a><a class="code" href="classKrColorTransform.html#b89153a6b95ce9afdea2145c6f76051d">00184</a>         <span class="keywordtype">void</span> <a class="code" href="classKrColorTransform.html#b89153a6b95ce9afdea2145c6f76051d">SetAlpha</a>( U8 a )                           { b.<a class="code" href="unionKrRGBA.html#6442accc557437abce1af3ee208a0ee4">c</a>.<a class="code" href="unionKrRGBA.html#a79e3567536d13a0b85492d4ff5bfb01">alpha</a> = a; CalcState(); }         
<a name="l00185"></a>00185 
<a name="l00186"></a><a class="code" href="classKrColorTransform.html#cab57fa4c155ba4cfa0f812e566e8353">00186</a>         <span class="keywordtype">void</span> <a class="code" href="classKrColorTransform.html#cab57fa4c155ba4cfa0f812e566e8353">TintRed</a>( U8 tint )                         { <a class="code" href="classKrColorTransform.html#042b1a8e1ff6b48bfc50894b4324f52a">SetRed</a>( 255 - tint, tint ); }         
<a name="l00187"></a><a class="code" href="classKrColorTransform.html#11af436a6f5d68feff5f7ea6ba9edd46">00187</a>         <span class="keywordtype">void</span> <a class="code" href="classKrColorTransform.html#11af436a6f5d68feff5f7ea6ba9edd46">TintGreen</a>( U8 tint )                       { <a class="code" href="classKrColorTransform.html#4cc943580a932fa1a8468458d9cab150">SetGreen</a>( 255 - tint, tint ); }       
<a name="l00188"></a><a class="code" href="classKrColorTransform.html#b6f3492489ff2acc60f4973d1fac8b41">00188</a>         <span class="keywordtype">void</span> <a class="code" href="classKrColorTransform.html#b6f3492489ff2acc60f4973d1fac8b41">TintBlue</a>( U8 tint )                        { <a class="code" href="classKrColorTransform.html#1700dffc4f5d7e57502971703226f298">SetBlue</a>( 255 - tint, tint ); }        
<a name="l00189"></a><a class="code" href="classKrColorTransform.html#64a0d4b4d87996a2331f187207a5e14b">00189</a>         <span class="keywordtype">void</span> <a class="code" href="classKrColorTransform.html#64a0d4b4d87996a2331f187207a5e14b">TintAlpha</a>( U8 tint )                       { <a class="code" href="classKrColorTransform.html#b89153a6b95ce9afdea2145c6f76051d">SetAlpha</a>( 255 - tint ); }                     
<a name="l00190"></a>00190 
<a name="l00192"></a><a class="code" href="classKrColorTransform.html#7d9f6927b4179e1ffd222162329af788">00192</a>         <span class="keywordtype">void</span> <a class="code" href="classKrColorTransform.html#7d9f6927b4179e1ffd222162329af788">Brighten</a>( U8 val )                 { m.<a class="code" href="unionKrRGBA.html#6442accc557437abce1af3ee208a0ee4">c</a>.<a class="code" href="unionKrRGBA.html#dd05af444a9a9de2053b88f093b4f7ce">red</a>   = 255-val; b.<a class="code" href="unionKrRGBA.html#6442accc557437abce1af3ee208a0ee4">c</a>.<a class="code" href="unionKrRGBA.html#dd05af444a9a9de2053b88f093b4f7ce">red</a>   = val; 
<a name="l00193"></a>00193                                                                           m.<a class="code" href="unionKrRGBA.html#6442accc557437abce1af3ee208a0ee4">c</a>.<a class="code" href="unionKrRGBA.html#af54403d77de7b24de1d737d723b340c">green</a> = 255-val; b.<a class="code" href="unionKrRGBA.html#6442accc557437abce1af3ee208a0ee4">c</a>.<a class="code" href="unionKrRGBA.html#af54403d77de7b24de1d737d723b340c">green</a> = val; 
<a name="l00194"></a>00194                                                                           m.<a class="code" href="unionKrRGBA.html#6442accc557437abce1af3ee208a0ee4">c</a>.<a class="code" href="unionKrRGBA.html#c6c8e70924ee54c1d80ff242ab99078f">blue</a>  = 255-val; b.<a class="code" href="unionKrRGBA.html#6442accc557437abce1af3ee208a0ee4">c</a>.<a class="code" href="unionKrRGBA.html#c6c8e70924ee54c1d80ff242ab99078f">blue</a>  = val; 
<a name="l00195"></a>00195                                                                           CalcState();
<a name="l00196"></a>00196                                                                         }
<a name="l00197"></a>00197 
<a name="l00199"></a><a class="code" href="classKrColorTransform.html#83c1699feb25623ab199004575c62ba2">00199</a>         <span class="keywordtype">void</span> <a class="code" href="classKrColorTransform.html#83c1699feb25623ab199004575c62ba2">Darken</a>( U8 val  )                  { m.<a class="code" href="unionKrRGBA.html#6442accc557437abce1af3ee208a0ee4">c</a>.<a class="code" href="unionKrRGBA.html#dd05af444a9a9de2053b88f093b4f7ce">red</a>   = 255-val; b.<a class="code" href="unionKrRGBA.html#6442accc557437abce1af3ee208a0ee4">c</a>.<a class="code" href="unionKrRGBA.html#dd05af444a9a9de2053b88f093b4f7ce">red</a> = 0;
<a name="l00200"></a>00200                                                                           m.<a class="code" href="unionKrRGBA.html#6442accc557437abce1af3ee208a0ee4">c</a>.<a class="code" href="unionKrRGBA.html#af54403d77de7b24de1d737d723b340c">green</a> = 255-val; b.<a class="code" href="unionKrRGBA.html#6442accc557437abce1af3ee208a0ee4">c</a>.<a class="code" href="unionKrRGBA.html#af54403d77de7b24de1d737d723b340c">green</a> = 0;
<a name="l00201"></a>00201                                                                           m.<a class="code" href="unionKrRGBA.html#6442accc557437abce1af3ee208a0ee4">c</a>.<a class="code" href="unionKrRGBA.html#c6c8e70924ee54c1d80ff242ab99078f">blue</a>  = 255-val; b.<a class="code" href="unionKrRGBA.html#6442accc557437abce1af3ee208a0ee4">c</a>.<a class="code" href="unionKrRGBA.html#c6c8e70924ee54c1d80ff242ab99078f">blue</a> = 0;
<a name="l00202"></a>00202                                                                           CalcState();
<a name="l00203"></a>00203                                                                         }
<a name="l00204"></a>00204 
<a name="l00205"></a>00205         <span class="comment">// --------- Advanced API ------- //</span>
<a name="l00226"></a>00226 <span class="comment"></span>        <span class="keywordtype">void</span> <a class="code" href="classKrColorTransform.html#edfe139a43d10c41d8bee29ffe1a47c7">Set</a>( U8 mRed, U8 bRed, U8 mGreen, U8 bGreen, U8 mBlue, U8 bBlue, U8 alpha );
<a name="l00227"></a>00227 
<a name="l00229"></a><a class="code" href="classKrColorTransform.html#042b1a8e1ff6b48bfc50894b4324f52a">00229</a>         <span class="keywordtype">void</span> <a class="code" href="classKrColorTransform.html#042b1a8e1ff6b48bfc50894b4324f52a">SetRed</a>( U8 _m, U8 _b )             {       m.<a class="code" href="unionKrRGBA.html#6442accc557437abce1af3ee208a0ee4">c</a>.<a class="code" href="unionKrRGBA.html#dd05af444a9a9de2053b88f093b4f7ce">red</a> = _m; b.<a class="code" href="unionKrRGBA.html#6442accc557437abce1af3ee208a0ee4">c</a>.<a class="code" href="unionKrRGBA.html#dd05af444a9a9de2053b88f093b4f7ce">red</a> = _b; CalcState(); }
<a name="l00231"></a><a class="code" href="classKrColorTransform.html#4cc943580a932fa1a8468458d9cab150">00231</a>         <span class="keywordtype">void</span> <a class="code" href="classKrColorTransform.html#4cc943580a932fa1a8468458d9cab150">SetGreen</a>( U8 _m, U8 _b )   {       m.<a class="code" href="unionKrRGBA.html#6442accc557437abce1af3ee208a0ee4">c</a>.<a class="code" href="unionKrRGBA.html#af54403d77de7b24de1d737d723b340c">green</a> = _m; b.<a class="code" href="unionKrRGBA.html#6442accc557437abce1af3ee208a0ee4">c</a>.<a class="code" href="unionKrRGBA.html#af54403d77de7b24de1d737d723b340c">green</a> = _b; CalcState(); }
<a name="l00233"></a><a class="code" href="classKrColorTransform.html#1700dffc4f5d7e57502971703226f298">00233</a>         <span class="keywordtype">void</span> <a class="code" href="classKrColorTransform.html#1700dffc4f5d7e57502971703226f298">SetBlue</a>( U8 _m, U8 _b )    {       m.<a class="code" href="unionKrRGBA.html#6442accc557437abce1af3ee208a0ee4">c</a>.<a class="code" href="unionKrRGBA.html#c6c8e70924ee54c1d80ff242ab99078f">blue</a> = _m; b.<a class="code" href="unionKrRGBA.html#6442accc557437abce1af3ee208a0ee4">c</a>.<a class="code" href="unionKrRGBA.html#c6c8e70924ee54c1d80ff242ab99078f">blue</a> = _b; CalcState(); }
<a name="l00234"></a>00234 
<a name="l00235"></a>00235         <span class="keywordtype">bool</span> IsIdentity()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> identity; }
<a name="l00236"></a>00236         <span class="keywordtype">bool</span> HasAlpha()<span class="keyword"> const   </span>{ <span class="keywordflow">return</span> hasAlpha; }
<a name="l00237"></a>00237         <span class="keywordtype">bool</span> HasColor()<span class="keyword"> const   </span>{ <span class="keywordflow">return</span> hasColor; }
<a name="l00238"></a>00238 
<a name="l00239"></a>00239         U8   Alpha()<span class="keyword"> const              </span>{ <span class="keywordflow">return</span> b.<a class="code" href="unionKrRGBA.html#6442accc557437abce1af3ee208a0ee4">c</a>.<a class="code" href="unionKrRGBA.html#a79e3567536d13a0b85492d4ff5bfb01">alpha</a>; }
<a name="l00240"></a>00240 
<a name="l00241"></a>00241         <span class="comment">// Apply 'color' to this transformation. Composite assumes 'color' PRE transforms this.</span>
<a name="l00242"></a>00242         <span class="keywordtype">void</span> Composite( <span class="keyword">const</span> <a class="code" href="classKrColorTransform.html">KrColorTransform</a>&amp; color );
<a name="l00243"></a>00243 
<a name="l00244"></a>00244         <span class="comment">// Note this transforms color but not alpha</span>
<a name="l00245"></a>00245         <span class="keyword">inline</span> U8 TransformRed( U8 red )<span class="keyword"> const          </span>{ <span class="keywordflow">return</span> (( red*m.<a class="code" href="unionKrRGBA.html#6442accc557437abce1af3ee208a0ee4">c</a>.<a class="code" href="unionKrRGBA.html#dd05af444a9a9de2053b88f093b4f7ce">red</a> ) &gt;&gt; 8 ) + b.<a class="code" href="unionKrRGBA.html#6442accc557437abce1af3ee208a0ee4">c</a>.<a class="code" href="unionKrRGBA.html#dd05af444a9a9de2053b88f093b4f7ce">red</a>; }
<a name="l00246"></a>00246         <span class="comment">// Note this transforms color but not alpha</span>
<a name="l00247"></a>00247         <span class="keyword">inline</span> U8 TransformGreen( U8 green )<span class="keyword"> const      </span>{ <span class="keywordflow">return</span> (( green*m.<a class="code" href="unionKrRGBA.html#6442accc557437abce1af3ee208a0ee4">c</a>.<a class="code" href="unionKrRGBA.html#af54403d77de7b24de1d737d723b340c">green</a> ) &gt;&gt; 8 ) + b.<a class="code" href="unionKrRGBA.html#6442accc557437abce1af3ee208a0ee4">c</a>.<a class="code" href="unionKrRGBA.html#af54403d77de7b24de1d737d723b340c">green</a>; }
<a name="l00248"></a>00248         <span class="comment">// Note this transforms color but not alpha</span>
<a name="l00249"></a>00249         <span class="keyword">inline</span> U8 TransformBlue( U8 blue )<span class="keyword"> const        </span>{ <span class="keywordflow">return</span> (( blue*m.<a class="code" href="unionKrRGBA.html#6442accc557437abce1af3ee208a0ee4">c</a>.<a class="code" href="unionKrRGBA.html#c6c8e70924ee54c1d80ff242ab99078f">blue</a> ) &gt;&gt; 8 ) + b.<a class="code" href="unionKrRGBA.html#6442accc557437abce1af3ee208a0ee4">c</a>.<a class="code" href="unionKrRGBA.html#c6c8e70924ee54c1d80ff242ab99078f">blue</a>; }
<a name="l00250"></a>00250 
<a name="l00251"></a>00251         <span class="comment">// Transform the color (all channels) no alpha is used.</span>
<a name="l00252"></a>00252         <span class="keywordtype">void</span> ApplyTransform( <a class="code" href="unionKrRGBA.html">KrRGBA</a>* ) <span class="keyword">const</span>;
<a name="l00253"></a>00253 
<a name="l00254"></a>00254         <span class="keywordtype">bool</span> operator==( <span class="keyword">const</span> <a class="code" href="classKrColorTransform.html">KrColorTransform</a>&amp; rhs )<span class="keyword"> const    </span>{ <span class="keywordflow">return</span>  ( m.<a class="code" href="unionKrRGBA.html#818314efe095f69d93e56984f26819e1">all</a> == rhs.<a class="code" href="classKrColorTransform.html#569cc1ff3c7398d56b80c6ab77a10e2d">m</a>.<a class="code" href="unionKrRGBA.html#818314efe095f69d93e56984f26819e1">all</a> &amp;&amp; b.<a class="code" href="unionKrRGBA.html#818314efe095f69d93e56984f26819e1">all</a> == rhs.<a class="code" href="classKrColorTransform.html#4908b1baa34ff9ed064290dc0a8ff450">b</a>.<a class="code" href="unionKrRGBA.html#818314efe095f69d93e56984f26819e1">all</a> ); }
<a name="l00255"></a>00255         <span class="keywordtype">bool</span> operator!=( <span class="keyword">const</span> <a class="code" href="classKrColorTransform.html">KrColorTransform</a>&amp; rhs )<span class="keyword"> const    </span>{ <span class="keywordflow">return</span> !( m.<a class="code" href="unionKrRGBA.html#818314efe095f69d93e56984f26819e1">all</a> == rhs.<a class="code" href="classKrColorTransform.html#569cc1ff3c7398d56b80c6ab77a10e2d">m</a>.<a class="code" href="unionKrRGBA.html#818314efe095f69d93e56984f26819e1">all</a> &amp;&amp; b.<a class="code" href="unionKrRGBA.html#818314efe095f69d93e56984f26819e1">all</a> == rhs.<a class="code" href="classKrColorTransform.html#4908b1baa34ff9ed064290dc0a8ff450">b</a>.<a class="code" href="unionKrRGBA.html#818314efe095f69d93e56984f26819e1">all</a> ); }
<a name="l00256"></a>00256 
<a name="l00257"></a>00257   <span class="keyword">private</span>:
<a name="l00258"></a>00258         <span class="keywordtype">void</span> CalcState();
<a name="l00259"></a>00259         
<a name="l00260"></a>00260         <span class="keywordtype">bool</span> identity;          <span class="comment">// no color transform?</span>
<a name="l00261"></a>00261         <span class="keywordtype">bool</span> hasAlpha;          <span class="comment">// alpha transform?</span>
<a name="l00262"></a>00262         <span class="keywordtype">bool</span> hasColor;          <span class="comment">// rgb transform?</span>
<a name="l00263"></a>00263 
<a name="l00264"></a>00264   <span class="keyword">public</span>:
<a name="l00265"></a>00265         <span class="comment">// These are public so the blit macros can get to them without</span>
<a name="l00266"></a>00266         <span class="comment">// showing up when the code is profiled. DO NOT change these</span>
<a name="l00267"></a>00267         <span class="comment">// directly -- use the API above.</span>
<a name="l00268"></a>00268         
<a name="l00269"></a>00269         <span class="comment">// For consistency with loops and types, we use RGBAs here as</span>
<a name="l00270"></a>00270         <span class="comment">// well. Note this results in an extra alpha: alpha is an </span>
<a name="l00271"></a>00271         <span class="comment">// absolute, not slope/intercept like the other components.</span>
<a name="l00272"></a>00272         <span class="comment">// (At least in Kyra...)</span>
<a name="l00273"></a>00273         <span class="comment">// So: m.c.alpha must always be 0.</span>
<a name="l00274"></a>00274         <span class="comment">//     b.c.alpha is the alpha channel used.</span>
<a name="l00275"></a>00275 
<a name="l00276"></a>00276         <a class="code" href="unionKrRGBA.html">KrRGBA</a>  m,      <span class="comment">// multiplication of color (255 == 1.0)</span>
<a name="l00277"></a>00277                         b;      <span class="comment">// addtion of color (0 == no color change)</span>
<a name="l00278"></a>00278 };
<a name="l00279"></a>00279 
<a name="l00280"></a>00280 
<a name="l00281"></a>00281 
<a name="l00282"></a>00282 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu Jul 20 20:45:31 2006 for Kyra by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
