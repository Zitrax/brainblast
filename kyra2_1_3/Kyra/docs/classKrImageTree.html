<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Kyra: KrImageTree Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li id="current"><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<h1>KrImageTree Class Reference</h1><!-- doxytag: class="KrImageTree" -->The ImageTree contains all the Image Nodes.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="imagetree_8h-source.html">imagetree.h</a>&gt;</code>
<p>
<a href="classKrImageTree-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKrImageTree.html#35a24aca169aa15db1642763c922f670cbce0877b4f778383023c729fa639d5d">ALWAYS_INSIDE_BOX</a> = 0x01</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Hit the inside of a box, even if the box is not filled.  <a href="#35a24aca169aa15db1642763c922f670cbce0877b4f778383023c729fa639d5d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKrImageTree.html#35a24aca169aa15db1642763c922f67089f4639d675e64556e636c76b893a0ab">GET_ALL_HITS</a> = 0x04</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get every object hit, not just the first.  <a href="#35a24aca169aa15db1642763c922f67089f4639d675e64556e636c76b893a0ab"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="classKrImageTree.html#35a24aca169aa15db1642763c922f670cbce0877b4f778383023c729fa639d5d">ALWAYS_INSIDE_BOX</a> =  0x01, 
<a class="el" href="classKrImageTree.html#35a24aca169aa15db1642763c922f67089f4639d675e64556e636c76b893a0ab">GET_ALL_HITS</a> =  0x04
 }</td></tr>

<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="e985468d8f28adfb99e236f1e1ea5310"></a><!-- doxytag: member="KrImageTree::Root" ref="e985468d8f28adfb99e236f1e1ea5310" args="()" -->
<a class="el" href="classKrImNode.html">KrImNode</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKrImageTree.html#e985468d8f28adfb99e236f1e1ea5310">Root</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the very base node of the tree. It is a <a class="el" href="classKrImNode.html">KrImNode</a> and never a more derived type. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKrImageTree.html#1b443cc8b236a0394ccd41f381eb6889">AddNode</a> (<a class="el" href="classKrImNode.html">KrImNode</a> *parent, <a class="el" href="classKrImNode.html">KrImNode</a> *addMe)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add a ImNode to the tree.  <a href="#1b443cc8b236a0394ccd41f381eb6889"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKrImageTree.html#fbec91686e755cfabe7dddd54541ab5d">DeleteNode</a> (<a class="el" href="classKrImNode.html">KrImNode</a> *removeMe)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Call this to delete a node and remove it from the tree.  <a href="#fbec91686e755cfabe7dddd54541ab5d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="5956576072a0d5c15e433524ebe0ce9d"></a><!-- doxytag: member="KrImageTree::FindNodeById" ref="5956576072a0d5c15e433524ebe0ce9d" args="(int id)" -->
<a class="el" href="classKrImNode.html">KrImNode</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKrImageTree.html#5956576072a0d5c15e433524ebe0ce9d">FindNodeById</a> (int id)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find a ImNode by its id. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="8390ec243177bbd7a0908fc6508bac79"></a><!-- doxytag: member="KrImageTree::FindNodeByName" ref="8390ec243177bbd7a0908fc6508bac79" args="(const std::string &amp;name)" -->
<a class="el" href="classKrImNode.html">KrImNode</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKrImageTree.html#8390ec243177bbd7a0908fc6508bac79">FindNodeByName</a> (const std::string &amp;name)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find a ImNode by its name. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKrImageTree.html#aecb976292b710da1e5a1b51fe186cb0">HitTest</a> (int x, int y, <a class="el" href="classKrImNode.html">KrImNode</a> *startHere, int flags, std::vector&lt; <a class="el" href="classKrImage.html">KrImage</a> * &gt; *outputArray, int *windowIndex)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Given a point -- in screen coordinates -- determine what ImageNodes are under that point.  <a href="#aecb976292b710da1e5a1b51fe186cb0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKrImageTree.html#a39b3266641371a23a9bbb3a5d4bb7bc">CheckSiblingCollision</a> (<a class="el" href="classKrImNode.html">KrImNode</a> *checkThis, std::vector&lt; <a class="el" href="classKrImage.html">KrImage</a> * &gt; *outputArray, int window=0)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Given a node, check if it collides with any of its own siblings.  <a href="#a39b3266641371a23a9bbb3a5d4bb7bc"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKrImageTree.html#783cd9a308fa15b7e067e3bda5281d09">CheckChildCollision</a> (<a class="el" href="classKrImNode.html">KrImNode</a> *checkThis, <a class="el" href="classKrImNode.html">KrImNode</a> *parent, std::vector&lt; <a class="el" href="classKrImage.html">KrImage</a> * &gt; *outputArray, int window=0)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Given a node "checkThis" and a parent, check if "checkThis" collides with any of the children of the parent.  <a href="#783cd9a308fa15b7e067e3bda5281d09"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKrImageTree.html#706466ccfc9663780abe65f2509571ae">CheckAllCollision</a> (<a class="el" href="classKrImNode.html">KrImNode</a> *checkThis, std::vector&lt; <a class="el" href="classKrImage.html">KrImage</a> * &gt; *outputArray, int window=0)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Given a node, check if it collides with anything in the Tree.  <a href="#706466ccfc9663780abe65f2509571ae"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4976cf8c0e71fad0bfa7182a9e6e78d5"></a><!-- doxytag: member="KrImageTree::Walk" ref="4976cf8c0e71fad0bfa7182a9e6e78d5" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classKrImageTree.html#4976cf8c0e71fad0bfa7182a9e6e78d5">Walk</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Flushes the cached state of the tree and makes it ready to draw. <br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
The ImageTree contains all the Image Nodes. 
<p>
<hr><h2>Member Enumeration Documentation</h2>
<a class="anchor" name="35a24aca169aa15db1642763c922f670"></a><!-- doxytag: member="KrImageTree::@13" ref="35a24aca169aa15db1642763c922f670" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="35a24aca169aa15db1642763c922f670cbce0877b4f778383023c729fa639d5d"></a><!-- doxytag: member="ALWAYS_INSIDE_BOX" ref="35a24aca169aa15db1642763c922f670cbce0877b4f778383023c729fa639d5d" args="" -->ALWAYS_INSIDE_BOX</em>&nbsp;</td><td>
Hit the inside of a box, even if the box is not filled. </td></tr>
<tr><td valign="top"><em><a class="anchor" name="35a24aca169aa15db1642763c922f67089f4639d675e64556e636c76b893a0ab"></a><!-- doxytag: member="GET_ALL_HITS" ref="35a24aca169aa15db1642763c922f67089f4639d675e64556e636c76b893a0ab" args="" -->GET_ALL_HITS</em>&nbsp;</td><td>
Get every object hit, not just the first. </td></tr>
</table>
</dl>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="1b443cc8b236a0394ccd41f381eb6889"></a><!-- doxytag: member="KrImageTree::AddNode" ref="1b443cc8b236a0394ccd41f381eb6889" args="(KrImNode *parent, KrImNode *addMe)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KrImageTree::AddNode           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classKrImNode.html">KrImNode</a> *&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classKrImNode.html">KrImNode</a> *&nbsp;</td>
          <td class="paramname"> <em>addMe</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add a ImNode to the tree. 
<p>
The parent can be specified; if not, the root will be used. The node added -- 'addMe' -- is handed over by ownership. It will be deleted when the tree is deleted or DeleteNode is called.<p>
Node children cannot directly be added. There is no KrImNode::AddChild function for instance; everything must be added through the tree. 
</div>
</div><p>
<a class="anchor" name="706466ccfc9663780abe65f2509571ae"></a><!-- doxytag: member="KrImageTree::CheckAllCollision" ref="706466ccfc9663780abe65f2509571ae" args="(KrImNode *checkThis, std::vector&lt; KrImage * &gt; *outputArray, int window=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool KrImageTree::CheckAllCollision           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classKrImNode.html">KrImNode</a> *&nbsp;</td>
          <td class="paramname"> <em>checkThis</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="classKrImage.html">KrImage</a> * &gt; *&nbsp;</td>
          <td class="paramname"> <em>outputArray</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>window</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Given a node, check if it collides with anything in the Tree. 
<p>
Returns true if any collisions occur, and returns an array of everything collided with.<p>
See <a class="el" href="classKrImage.html#af551c933bc03d4ea1708df9a0699679">KrImage::CheckCollision</a> for a discussion of collision issues. 
</div>
</div><p>
<a class="anchor" name="783cd9a308fa15b7e067e3bda5281d09"></a><!-- doxytag: member="KrImageTree::CheckChildCollision" ref="783cd9a308fa15b7e067e3bda5281d09" args="(KrImNode *checkThis, KrImNode *parent, std::vector&lt; KrImage * &gt; *outputArray, int window=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool KrImageTree::CheckChildCollision           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classKrImNode.html">KrImNode</a> *&nbsp;</td>
          <td class="paramname"> <em>checkThis</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classKrImNode.html">KrImNode</a> *&nbsp;</td>
          <td class="paramname"> <em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="classKrImage.html">KrImage</a> * &gt; *&nbsp;</td>
          <td class="paramname"> <em>outputArray</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>window</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Given a node "checkThis" and a parent, check if "checkThis" collides with any of the children of the parent. 
<p>
There does not need to be any relationship between "checkThis" and "parent".<p>
Returns true if any collisions occur, and returns an array (outputArray) of all the KrImages collided with.<p>
See <a class="el" href="classKrImage.html#af551c933bc03d4ea1708df9a0699679">KrImage::CheckCollision</a> for a discussion of collision issues. 
</div>
</div><p>
<a class="anchor" name="a39b3266641371a23a9bbb3a5d4bb7bc"></a><!-- doxytag: member="KrImageTree::CheckSiblingCollision" ref="a39b3266641371a23a9bbb3a5d4bb7bc" args="(KrImNode *checkThis, std::vector&lt; KrImage * &gt; *outputArray, int window=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool KrImageTree::CheckSiblingCollision           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classKrImNode.html">KrImNode</a> *&nbsp;</td>
          <td class="paramname"> <em>checkThis</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="classKrImage.html">KrImage</a> * &gt; *&nbsp;</td>
          <td class="paramname"> <em>outputArray</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>window</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Given a node, check if it collides with any of its own siblings. 
<p>
Returns true if any collisions occur, and returns an array (outputArray) of all the KrImages collided with.<p>
See <a class="el" href="classKrImage.html#af551c933bc03d4ea1708df9a0699679">KrImage::CheckCollision</a> for a discussion of collision issues. 
</div>
</div><p>
<a class="anchor" name="fbec91686e755cfabe7dddd54541ab5d"></a><!-- doxytag: member="KrImageTree::DeleteNode" ref="fbec91686e755cfabe7dddd54541ab5d" args="(KrImNode *removeMe)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool KrImageTree::DeleteNode           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classKrImNode.html">KrImNode</a> *&nbsp;</td>
          <td class="paramname"> <em>removeMe</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Call this to delete a node and remove it from the tree. 
<p>
<dl compact><dt><b>Warning:</b></dt><dd>: DeleteNode( this ) can cause a crash. It's a temptingly useful thing, but in the case where parent objects hold on to pointers, those pointers go dangling. It's best to avoid DeleteNode( this ) usage. </dd></dl>

</div>
</div><p>
<a class="anchor" name="aecb976292b710da1e5a1b51fe186cb0"></a><!-- doxytag: member="KrImageTree::HitTest" ref="aecb976292b710da1e5a1b51fe186cb0" args="(int x, int y, KrImNode *startHere, int flags, std::vector&lt; KrImage * &gt; *outputArray, int *windowIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KrImageTree::HitTest           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classKrImNode.html">KrImNode</a> *&nbsp;</td>
          <td class="paramname"> <em>startHere</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="classKrImage.html">KrImage</a> * &gt; *&nbsp;</td>
          <td class="paramname"> <em>outputArray</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>windowIndex</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Given a point -- in screen coordinates -- determine what ImageNodes are under that point. 
<p>
Note that only images have bounds and are drawn, so only images can be hit.<p>
If 'startHere' is null the whole tree will be searched, else the search will cover 'startHere' and its children.<p>
HitTest, by defualt, stops at the first non-transparent pixel it hits. There are flags to modify this behavior:<p>
<ul>
<li>ALWAYS_INSIDE_BOX hits inside boxes that aren't filled</li><li>GET_ALL_HITS, not just the first </li></ul>

</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="imagetree_8h-source.html">imagetree.h</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Thu Jul 20 20:45:32 2006 for Kyra by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
